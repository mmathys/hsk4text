(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(7),i=n.n(s),u=(n(12),n(3)),a=n.n(u),o=n(4),l=n(2),f=n(21),j=(n(14),n(15),n(0)),d=function(e){return e.map((function(e){return e.split("\uff1a")[0].length<=4})).reduce((function(e,t){return e&&t}))};function b(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),r=n[0],s=n[1],i=function(e){var t=e.split("\uff1a");if(1===t.length)return["",t[0].trim()];var n=t[0]+"\uff1a",c=t.slice(1).reduce((function(e,t){return e+"\uff1a"+t}));return[n.trim(),c.trim()]};return Object(c.useEffect)((function(){(function(){var t=Object(o.a)(a.a.mark((function t(){var n,c,r,u,o,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=w(e.config),t.next=3,fetch("text/".concat(n,".txt"));case 3:return c=t.sent,t.next=6,c.text();case 6:r=t.sent,u=r.split("\n"),d(u)?(o=u.map(i),s(o)):(l=u.map((function(e){return["",e]})),s(l));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"table",children:null===r||void 0===r?void 0:r.map((function(e){return Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("p",{className:"cell dialog-head",children:e[0]}),Object(j.jsx)("p",{className:"cell",children:e[1]})]},e[1])}))})})}var p=n(6),v=n.n(p),O=["k"," "],x=["j","ArrowLeft"],h=["l","ArrowRight"],m=["ArrowUp","i"],g=["ArrowDown","m"];function w(e){if(e)return(e.lesson<10?"0":"")+e.lesson+"-"+e.text}var N=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),i=Object(l.a)(s,2),u=i[0],d=i[1],p=Object(c.useState)(-1),N=Object(l.a)(p,2),k=N[0],y=N[1],E=Object(c.useRef)(null);Object(c.useEffect)((function(){(function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("config.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(e){d(e),E.current&&E.current.load()},A=function(e){return function(t){return!!e.includes(t.key)&&(t.preventDefault(),!0)}},C=Object(f.a)(A(O)),T=Object(l.a)(C,1)[0],F=Object(f.a)(A(x)),L=Object(l.a)(F,1)[0],B=Object(f.a)(A(h)),D=Object(l.a)(B,1)[0],I=Object(f.a)(A(m)),J=Object(l.a)(I,1)[0],P=Object(f.a)(A(g)),R=Object(l.a)(P,1)[0];return Object(c.useEffect)((function(){var e,t,n;T&&((null===(e=E.current)||void 0===e?void 0:e.paused)?null===(t=E.current)||void 0===t||t.play():null===(n=E.current)||void 0===n||n.pause())}),[T]),Object(c.useEffect)((function(){E.current&&(L&&(E.current.currentTime-=5),D&&(E.current.currentTime+=5))}),[L,D,E]),Object(c.useEffect)((function(){if(n){var e,t=n.texts.length,c=u&&n.texts.indexOf(u);R&&(e=void 0!==c?n.texts[c+1]:n.texts[0]),J&&(e=void 0!==c?n.texts[c-1]:n.texts[t-1]),e&&(S(e),y(e.lesson))}}),[J,R,n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("div",{className:"nav",children:function(){if(n){var e=function(e){return function(){y(e===k?-1:e)}},t=function(e,t){if(t===k){var n=function(e){return"nav-entry"+(e===u?" active":"")};return e.map((function(e){return Object(j.jsxs)("div",{className:n(e),onClick:function(){return S(e)},children:["Text ",e.text]},w(e))}))}},c=v.a.groupBy(n.texts,(function(e){return e.lesson}));return v.a.keys(c).map((function(n){var r=parseInt(n),s=c[n],i="nav-lesson"+(r===(null===u||void 0===u?void 0:u.lesson)?" active":"");return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:i,onClick:e(r),children:["Lesson ",n]}),t(s,r)]},n)}))}}()}),function(){if(u){return Object(j.jsxs)("div",{className:"text chinese",children:[u.title?Object(j.jsx)("p",{className:"title",children:u.title}):void 0,Object(j.jsx)(b,{config:u}),Object(j.jsxs)("audio",{className:"audio",controls:!0,ref:E,children:[Object(j.jsx)("source",{src:"audio/".concat(w(u),".mp3"),type:"audio/mpeg"}),"Your browser does not support the audio element."]})]})}}()]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root")),k()}},[[19,1,2]]]);
//# sourceMappingURL=main.929d625e.chunk.js.map